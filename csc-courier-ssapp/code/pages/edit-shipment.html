<webc-container controller="EditShipmentController">
  <main class="full-flex-column">
    <section>
      <webc-template template="header-template"></webc-template>
      <webc-template template="dashboard-menu"></webc-template>
    </section>

    <section class="header-section">
      <div class="navigation-section">
        <span class="nav-back" data-tag="nav-back">
          <i class="fa-solid fa-arrow-left"></i>
        </span>
        <span data-tag="dashboard">Dashboard</span> / <span data-tag="dashboard">Shipments</span> / <span data-tag="view-shipment">{{@shipment.shipmentId}}</span> / <strong>Update Shipment</strong>
      </div>

      <div class="body-main-section">

        <p class='text-center'> Please proceed to add details to process change of shipment status to
          <b>"In Transit"</b>
        </p>

        <div class="stepper-container">
          <!--First Step -->
          <div class="step-element step-active" data-tag="step-1" id="step-1">1 - Shipment Details</div>
          <!-- Line -->
          <div class="step-break-line"></div>
          <!--Second Step -->
          <div class="step-element" data-tag="step-2" id="step-2" step-inactive='@formValidation.shipmentDetailsDisabled'>2 - Add Documents</div>
          <!-- Line -->
          <div class="step-break-line"></div>
          <!--Third Step -->
          <div class="step-element" data-tag="step-3" id="step-3" step-inactive='@formValidation.shipmentDetailsDisabled'>3 - Comments</div>
          <!-- Line -->
          <div class="step-break-line"></div>
          <!--Fourth Step -->
          <div class="step-element" data-tag="step-4" id="step-4" step-inactive='@formValidation.shipmentDetailsDisabled'>4 - Confirm</div>
        </div>

        <div class="step-holder-modal" id="step-1-wrapper">
          <br />
          <div class="container">
            <div class="form-group">
              <label>{{@form.billNumber.label}}</label>
              <input class="form-control" data-view-model="@form.billNumber" value="@form.billNumber.value" />
            </div>
            <div class="form-group">
              <label>{{@form.hsCode.label}}</label>
              <input class="form-control" data-view-model="@form.hsCode" value="@form.hsCode.value" />
            </div>
          </div>

          <div class="row-wrapper button-wrapper">
            <div></div>
            <button class="btn-default" data-tag="from_step_1_to_2" id="from_step_1_to_2" disabled="@formValidation.shipmentDetailsDisabled">
              Next
              <i class="fas fa-angle-right"></i>
            </button>
          </div>
        </div>

        <div class="step-holder step-hidden" id="step-2-wrapper">
          <div class="row">
            <div class="col-12 upload-attachment">
              <psk-files-chooser event-name="add-file" data-view-model="@form.attachment"></psk-files-chooser>
              <p>Maximum upload file size: 64MB</p>
            </div>
            <div data-if="@form.areFilesEmpty"  class="col-12">
              <div class="alert alert-light text-center" slot="true" role="alert">
                There are no any Files uploaded yet
              </div>
              <table slot="false" class="table table-borderless attach-documents-table">
                <thead>
                  <tr>
                    <th scope="col">Document Name</th>
                    <th scope="col">Attached By</th>
                    <th scope="col">Date/Time Attached</th>
                    <th class="text-center" scope="col">Open/Download</th>
                    <th class="text-center" scope="col">Delete</th>
                  </tr>
                </thead>
                <tbody data-for="@form.documents">
                  <tr>
                    <th>{{@name}}</th>
                    <td>{{@attached_by}}</td>
                    <td>{{@date}}</td>
                    <td class="text-center" data-tag="download-file" data-custom="@uuid">
                      <i class='attach-documents-table-icon fas fa-download'></i>
                    </td>
                    <td class="text-center" data-tag="remove-file">
                      <i class='attach-documents-table-icon fas fa-trash'></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="row-wrapper button-wrapper">
            <button class="btn-default" data-tag="from_step_2_to_1" id="from_step_2_to_1">
              <i class="fas fa-angle-left"></i>
              Previous
            </button>
            <button class="btn-default" data-tag="from_step_2_to_3" id="from_step_2_to_3">
              Next
              <i class="fas fa-angle-right"></i>
            </button>
          </div>
        </div>

        <div class="step-holder step-hidden" id="step-3-wrapper">
          <div class="row comments-container">
            <div class="col-lg-12 col-xl-6">
              <label>Comments:</label>
              <div class="comments-wrapper" data-for="@allComments">
                <div class="comment">
                  <div class="identity"><small>{{@entity}}</small>, <small>{{@date}}</small></div>
                  <div>{{@comment}}</div>
                </div>
                <div slot="no-data">No comments</div>
              </div>
            </div>
            <div class="col-lg-12 col-xl-6">
              <div class="form-group">
                <label>{{@form.add_comment.label}}</label>
                <input class="form-control" name="@form.add_comment.name" placeholder="@form.add_comment.placeholder" required="@form.add_comment.required" type="text" value="@form.add_comment.value" />
              </div>
            </div>
          </div>

          <div class="row-wrapper button-wrapper">
            <button class="btn-default" data-tag="from_step_3_to_2" id="from_step_3_to_2">
              <i class="fas fa-angle-left"></i>
              Previous
            </button>
            <button class="btn-default" data-tag="from_step_3_to_4" id="from_step_3_to_4">
              Next
              <i class="fas fa-angle-right"></i>
            </button>
          </div>
        </div>

        <div class="step-holder step-hidden" id="step-4-wrapper">
          <div class="row">
            <div class="col-lg-12 col-xl-6">
              <webc-template data-view-model="@" template="shipment/shipment-edit-details"></webc-template>
            </div>

            <div class="col-lg-12 col-xl-6">
              <div class="grid-column-wrapper">
                <label>{{@form.billNumber.label}}</label>
                <input class="form-control form-control-sm" readonly="readonly" name="@form.billNumber.name" placeholder="@form.billNumber.placeholder" type="text" value="@form.billNumber.value" />
                <label>{{@form.hsCode.label}}</label>
                <input class="form-control form-control-sm" readonly="readonly" name="@form.hsCode.name" placeholder="@form.hsCode.placeholder" type="text" value="@form.hsCode.value" />
                <label>Comments</label>
                <div class="comments-wrapper" data-for="@allComments">
                  <div class="comment">
                    <div class="identity"><small>{{@entity}}</small>, <small>{{@date}}</small></div>
                    <div>{{@comment}}</div>
                  </div>
                  <div slot="no-data">No comments</div>
                </div>
              </div>

              <div class="grid-column-wrapper" data-for="@form.documents">
                <label>Attached Document</label>

                <div class='file-name-downloader'>
                  <div class='input-group'>
                    <input class='form-control form-control-sm' readonly type='text'
                           value="@name"/>
                    <div class='input-group-append'>
                      <button class='btn btn-outline-secondary' type='button' data-tag="download-file" data-custom="@uuid"">
                        <i class='fa fa-download'></i>
                      </button>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
          
          <div class="row-wrapper button-wrapper">
            <button class="btn-reset" data-tag="form_reset">
              <i class="fas fa-times"></i>
              Clear Changes
            </button>
            <button class="btn-default" data-tag="form_submit">
              <i class="fas fa-check"></i>
              Submit Changes
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>
</webc-container>
