<webc-container controller='SingleKitController'>
    <main class='full-flex-column'>
      <section>
        <webc-template template='header-template'></webc-template>
        <webc-template template='dashboard-menu'></webc-template>
      </section>
  
      <section class='header-section'>
        <div class='navigation-section'>
          <span class='nav-back' data-tag='nav-back'>
            <i class="fa-solid fa-arrow-left"></i>
          </span>
                  <span data-tag='dashboard'>Dashboard</span> / <span data-tag='kits-management'>Kits Management</span> / <span data-tag='view-study-kits'>{{@kitModel.kit.studyId}} - {{@kitModel.kit.orderId}} / Kits</span> / <strong>{{@kitModel.kit.kitId}} </strong>
        </div>
  
        <div class='body-main-section'>
          <div class='row-wrapper'>
            <div class='col-4 text-left'>
              <div data-if="@kitModel.kit.status_approved">
                <div class='entity-status-box background-approved'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>
              <div data-if="@kitModel.kit.status_normal">
                <div class='entity-status-box background-primary'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>


              <div data-if="@kitModel.kit.status_quarantine">
                <div class='entity-status-box background-in-quarantine'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>

              <div data-if="@kitModel.kit.status_pending_destruction">
                <div class='entity-status-box background-pending-destruction'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>

              <div data-if="@kitModel.kit.status_cancelled">
                <div class='entity-status-box background-cancelled'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>

              <div data-if="@kitModel.kit.status_request_relabeling">
                <div class='entity-status-box background-orange'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>

              <div data-if="@kitModel.kit.status_blocked">
                <div class='entity-status-box background-orange'>
                  <div>Kit Status:</div>
                  <div><b>{{@kitModel.kit.status_value}}</b></div>
                  <div>{{@kitModel.kit.status_date}}</div>
                </div>
              </div>
            </div>
            
  
            <div class='col-4 text-center'>
              <div class='entity-title'><b>Kit</b></div>
              <div class='entity-subtitle'><b>Pending Action:</b></div>
              <div class='entity-disclaimer'>{{@kitModel.kit.pending_action}}</div>
            </div>
  
            <div class='col-4 text-right'>
              <button class='btn-default' data-tag='history-button'>
                <i class='fas fa-clock-rotate-left'></i>
                View History
              </button>
            </div>
          </div>
  
          <div class='row-wrapper entity-data-section'>
            <!-- Kit Details -->
            <div class='accordion-item' data-tag='toggle-accordion'>
              <i class='fas fa-angle-right accordion-icon'></i>
              <span>Kit Details</span>
            </div>
            <div class='accordion-item-holder'>
              <webc-template data-view-model='@kitModel' template='kits/kit-details'></webc-template>
            </div>
          </div>
          <div class='row-wrapper button-wrapper'>



            <div data-if='@actions.canQuarantineKit'>
              <button class='btn-reset' data-tag='quarantine-kit'>
                <i class="fas fa-triangle-exclamation"></i>
                Quarantine Kit
              </button>
            </div>

            <div data-if='@actions.canRequestDestruction'>
              <button class='btn-reset' data-tag='request-kit-destruction' disabled='@kitModel.kit.isRequestKitDestructionDisabled'>
                <i class="fas fa-triangle-exclamation"></i>
                Request Destruction
              </button>
            </div>

            <div data-if='@actions.canConfirmDestruction'>
              <button class='btn-reset' data-tag='confirm-kit-destruction' disabled='@kitModel.kit.isReturnKitDisabled'>
                <i class="fas fa-triangle-exclamation"></i>
               Confirm Destruction
              </button>
            </div>

            <div data-if='@actions.canManageKit'>
            <button class='btn-default' data-tag='manage-kit' disabled='@kitModel.kit.studyHasEnded'>
              <span class='fas fa-icon fa-qrcode'></span>
              Manage Kit
            </button>
            </div>

            <div data-if='@actions.canAssignKit'>
              <button class='btn-default' data-tag='assign-kit'>
                <span class='fas fa-medkit mr-2'></span>
                Assign Kit
              </button>
            </div>

            <div data-if='@actions.canDispenseKit'>
              <button class='btn-default' data-tag='dispense-kit' disabled='@kitModel.kit.studyHasEnded'>
                <span class='fas fa-medkit mr-2'></span>
                Dispense Kit
              </button>
            </div>

            <div data-if='@actions.canReturnKit'>
              <button class='btn-default' data-tag='return-kit' disabled='@kitModel.kit.isReturnKitDisabled'>
                <span class='fas fa-rotate-left mr-2'></span>
                Return Kit
              </button>
            </div>

            <div data-if='@actions.canReconcileKit'>
              <button class='btn-default' data-tag='reconcile-kit' disabled='@kitModel.kit.isReconcileKitDisabled'>
                <span class='fas fa-user-check mr-2'></span>
                Reconcile Kit
              </button>
            </div>

            <div data-if='@actions.canBlockKit'>
              <button class='btn-reset' data-tag='block-kit' disabled='@kitModel.kit.isBlockKitDisabled'>
                <span class='fas fa-check'></span>
                Block Kit
              </button>
            </div>

            <div data-if='@actions.canMakeKitAvailable'>
              <button class='btn-default' data-tag='make-kit-available'>
                <span class='fas fa-check'></span>
                Make Kit Available
              </button>
            </div>

          </div>
        </div>
        </div>
        </div>
      </section>
    </main>
  </webc-container>
  
